<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{util.path}/template/manage.xhtml">
	<ui:define name="head">
		<link href="../css/shop/shop.css" rel="stylesheet" />
		<link href="#{util.path}/uploadify/uploadify.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="#{util.path}/uploadify/jquery.uploadify.min.js" />
	</ui:define>
	<ui:define name="container">
		<h:form>
			<fieldset>
				<div class="clearfix">
					<label for="xlInput" class="label_width">类别</label>
					<div class="div_margin">
						#{productController.product.category.name}
					</div>
				</div>
				<div class="clearfix">
					<label for="xlInput" class="label_width">名称</label>
					<div class="div_margin">
						#{productController.product.name}
					</div>
				</div>
				<div class="clearfix">
					<label for="xlInput" class="label_width">描述</label>
					<div class="div_margin">
						#{productController.product.description}
					</div>
				</div>
			</fieldset>
			<div class="row" id="photos" >
				<div id="photoItem" class="span-one-third" style="display: none">
					<p>
						<a href="canteen/viewCanteen.html"><img class="product"
							src="" />
						</a>
					</p>
					<input type="hidden" />
				</div>
			</div>
			<div class="actions" style="padding-left: 360px;">
				<h:commandButton class="btn primary" action="#{productController.saveProduct}" value="保存" />
			</div>
		</h:form>
	</ui:define>
	<ui:define name="js">
			$(function() {
			  var width = '580';
			  var height = '290';
			  var phone = '#{phone}';
			  var jspPaht = '#{util.uploadProject}/uploadify/uploadifyGate.jsp?phone=#{phone}&amp;width='+width +'&amp;height='+ height;
		      $('#file_upload').uploadify({
		         'swf'      : '#{util.uploadProject}/uploadify/uploadify.swf',
		         'uploader' : jspPaht,
		         'buttonText' : '上传图片', 
		         'width'    :  '52px',
		         'height'   :  '18px',
		         'fileTypeExts' : '*.gif; *.jpg; *.png',
		         'onUploadSuccess' : function(file, data, response) {
		         	var path = "#{util.uploadProject}#{util.repository}" + data;
		        	$("#gatePhone").show();
		        	$("#gatePhone").attr("src", path); 
		        	$("#j_idt9\\:gate_url").val(data);
		          },
		         'buttonClass' : 'btn info'
		      });
		    });
	</ui:define>
</ui:composition>